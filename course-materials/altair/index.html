<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Altair for Charts</title><meta name=generator content="Hugo 0.74.3"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=stylesheet href=https://byuistats.github.io/DS250-Comeau/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://byuistats.github.io/DS250-Comeau/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://byuistats.github.io/DS250-Comeau/plugins/highlight/hybrid.css><link rel=icon href=https://byuistats.github.io/DS250-Comeau/images/favicon.png type=image/x-icon><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700&display=swap" rel=stylesheet><style>:root{--primary-color:#02007e;--body-color:#f9f9f9;--text-color:#636363;--text-color-dark:#242738;--white-color:#ffffff;--light-color:#f8f9fa;--font-family:Roboto}</style><link href=https://byuistats.github.io/DS250-Comeau/css/style.min.css rel=stylesheet media=screen><script src=https://byuistats.github.io/DS250-Comeau/plugins/jquery/jquery-1.12.4.js></script><script src=https://byuistats.github.io/DS250-Comeau/plugins/jquery/jquery-ui.js></script><script src=https://byuistats.github.io/DS250-Comeau/plugins/bootstrap/bootstrap.min.js></script><script src=https://byuistats.github.io/DS250-Comeau/plugins/match-height/jquery.matchHeight-min.js></script><script src=https://byuistats.github.io/DS250-Comeau/plugins/highlight/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-132356198-4','auto');ga('send','pageview');}</script></head><body><header class="shadow-bottom sticky-top bg-white"><nav class="navbar navbar-expand-md navbar-light"><div class=container><a class="navbar-brand px-2" href=/DS250-Comeau>DS250</a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation aria-controls=navigation aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class="nav-link text-dark" href=/DS250-Comeau>Home</a></li><li class=nav-item><a class="nav-link text-dark" href=/DS250-Comeau/projects>Projects</a></li><li class=nav-item><a class="nav-link text-dark" href=/DS250-Comeau/contact>Contact</a></li><li class=nav-item><a class="nav-link text-dark" href=/DS250-Comeau/course-materials>Materials</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle text-dark" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Navigate</a><div class=dropdown-menu><a class=dropdown-item href=/DS250-Comeau/slides>Slides</a>
<a class=dropdown-item href=/DS250-Comeau/course-materials/syllabus/>Syllabus</a>
<a class=dropdown-item href=/DS250-Comeau/faq>FAQ</a></div></li></ul></div></div></nav></header><section class="single section-sm pb-0"><div class=container><div class=row><div class=col-lg-3><div class=sidebar><ul class=list-styled><a class=back-btn href=/DS250-Comeau></a><li data-nav-id=https://byuistats.github.io/DS250-Comeau/course-materials/ title="Course Materials" class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/course-materials/>Course Materials</a><ul><li data-nav-id=https://byuistats.github.io/DS250-Comeau/course-materials/syllabus/ title="DS 250 Syllabus" class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/course-materials/syllabus/>DS 250 Syllabus</a><ul><li data-nav-id=https://byuistats.github.io/DS250-Comeau/course-materials/syllabus/competency/ title="DS 250 Competency" class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/course-materials/syllabus/competency/>DS 250 Competency</a></li></ul></li><li data-nav-id=https://byuistats.github.io/DS250-Comeau/course-materials/python-for-data-science/ title="Python for Data Science" class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/course-materials/python-for-data-science/>Python for Data Science</a></li><li data-nav-id=https://byuistats.github.io/DS250-Comeau/course-materials/machine-learning/ title="Machine Learning" class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/course-materials/machine-learning/>Machine Learning</a></li><li data-nav-id=https://byuistats.github.io/DS250-Comeau/course-materials/sql-for-data-science/ title="SQL for Data Science" class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/course-materials/sql-for-data-science/>SQL for Data Science</a></li><li data-nav-id=https://byuistats.github.io/DS250-Comeau/course-materials/vs-code/ title="VS Code for Data Science" class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/course-materials/vs-code/>VS Code for Data Science</a></li><li data-nav-id=https://byuistats.github.io/DS250-Comeau/course-materials/altair/ title="Altair for Charts" class="sidelist
active"><a href=https://byuistats.github.io/DS250-Comeau/course-materials/altair/>Altair for Charts</a></li><li data-nav-id=https://byuistats.github.io/DS250-Comeau/course-materials/quarto-for-data-science/ title="Quarto for Data Science" class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/course-materials/quarto-for-data-science/>Quarto for Data Science</a></li><li data-nav-id=https://byuistats.github.io/DS250-Comeau/course-materials/git_github_ds/ title="Git and GitHub for DS" class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/course-materials/git_github_ds/>Git and GitHub for DS</a><ul><li data-nav-id=https://byuistats.github.io/DS250-Comeau/course-materials/git_github_ds/pull_merge/ title="Pull and Merge Forks on GitHub" class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/course-materials/git_github_ds/pull_merge/>Pull and Merge Forks on GitHub</a></li></ul></li></ul></li></ul></div></div><div class=col-lg-9><div class="p-lg-5 p-4 bg-white"><h2 class=mb-5>Altair for Charts</h2><div class=content><h2 id=altair-visualization>Altair Visualization</h2><p>We will be using Altair in our course. It is a declarative visualization package in Python that is based on Vega-Lite which leverages the grammar of graphics.</p><ul><li><a href=https://altair-viz.github.io/>User Guide</a></li><li><a href=https://uwdata.github.io/visualization-curriculum/intro.html>Data Visualization Curriculum</a> or the <a href>Quarto version</a>
<a href=https://jjallaire.github.io/visualization-curriculum/>https://jjallaire.github.io/visualization-curriculum/</a>)</li><li><a href=https://byuidatascience.github.io/python4ds/data-visualisation.html>P4DS Data Visualization Chapter</a></li></ul><h2 id=rendering-altair-charts-in-quarto>Rendering Altair Charts in Quarto</h2><p>We use <a href=https://quarto.org/docs/presentations/revealjs/#figure-size>Quarto</a> to render Altair images automagically into our HTML reports. The process should simply work. However, read in the following section if you need to export one of your images as a <code>.png</code> or another image format.</p><h2 id=saving-altair-charts>Saving Altair Charts</h2><p>Just installing <code>altair</code> and <code>altair_saver</code> will not allow you to leverage the <code>.save()</code> method to save your chart. The javascript visualization you see in your interactive python window needs additional external applications to allow <code>.save('chart.png')</code> to work.</p><p>We will go through a few ways for us to save our Altair plots.</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/RqlCQdi6gg4 style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><h3 id=1-saving-altair-plots-programmatically>1. Saving <code>altair</code> plots programmatically</h3><p><img src=plot1.png alt="above plot to be saved"></p><p>Let&rsquo;s say we want to save the above plot as a PNG file. Assuming we have already installed the <strong>altair</strong> library, we need to install the <strong>altair_saver</strong>.</p><h4 id=11-installing-the-altair_saver>1.1 Installing the altair_saver</h4><p>Within your interactive python window execute the following command.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> sys
<span style=color:#960050;background-color:#1e0010>!</span>{sys<span style=color:#f92672>.</span>executable} <span style=color:#f92672>-</span>m pip install altair_saver
</code></pre></div><h4 id=12-additional-tool-for-saving-plots>1.2 Additional tool for saving plots</h4><p><strong>We suggest NodeJS path.</strong> However, you are more than welcome to study <a href=https://github.com/altair-viz/altair_saver#selenium>Selenium</a> for further understanding. The Github repository for <a href=https://github.com/altair-viz/altair_saver>altair_saver</a>, the developers exclusively told us to install additional tools.</p><p><strong>NodeJS Installation</strong></p><ol><li>Install the <a href=https://nodejs.org/en/download/>NodeJS</a> for your platform</li><li>Run the following in your Terminal (Mac) or PowerShell (Windows) to install all the packages we need from NodeJS.</li></ol><pre><code>npm install -g vega-lite vega-cli canvas
</code></pre><h5 id=m1-mac-altair-solution>M1 Mac Altair Solution</h5><ol><li>Install selenium using the chromedriver package form <a href=https://chromedriver.chromium.org>this link</a>: <a href=https://chromedriver.chromium.org>https://chromedriver.chromium.org</a>.</li><li>Unzip the file and move the file to your chrome path <code>/usr/local/bin/chromedriver</code></li></ol><p>See the <a href=selenium_fix.py><code>selenium_fix.py</code></a> script for an example.</p><p><em>Note: This process will run a local server on your computer that opens the chart as an PNG file in chrome and downloads the file to the folder in which that VSCode file is located on your computer.</em></p><h4 id=13-saving-a-plot-using-altair_saver>1.3 Saving a plot using <code>altair_saver</code></h4><p>It might require you to restart VScode and import everything again for this to work. Please note that the plot will be saved in the same folder of the script.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>chart <span style=color:#f92672>=</span> alt<span style=color:#f92672>.</span>chart(<span style=color:#f92672>&lt;</span>data<span style=color:#f92672>&gt;</span>)<span style=color:#f92672>.&lt;</span>chart_methods<span style=color:#f92672>&gt;</span>
chart<span style=color:#f92672>.</span>save(<span style=color:#e6db74>&#39;name_of_chart.png&#39;</span>)
</code></pre></div><h3 id=2-save-as-png-method>2. <code>Save as PNG</code> method</h3><p>The method only requires us to have <strong>Altair</strong> library. Whenever we output a plot, we will see a button with three dots at the top right corner of the plot.</p><p><img src=save2.PNG alt="Clicking Save as PNG will bring us to a window to save our plot."></p><p>Clicking <em>Save as PNG</em> will bring us to a window to save our plot.</p><h3 id=3-screenshot-method>3. Screenshot method</h3><p>If all thing fails and we need to save a plot, the <a href=https://blogs.windows.com/windowsexperience/2019/04/08/windows-10-tip-snip-sketch/>snip & sketch (Windows)</a> or taking a <a href=https://support.apple.com/en-us/HT201361>screenshot (MacOS)</a> will be our last resort.</p></div><p class="post-meta border-bottom pb-3 mb-0 mt-3">Updated on 15 Sep 2020</p><nav class="pagination mt-3"><a class="nav nav-prev" href=https://byuistats.github.io/DS250-Comeau/course-materials/vs-code/><i class="ti-arrow-left mr-2"></i><span class="d-none d-md-block">VS Code for Data Science</span></a>
<a class="nav nav-next" href=https://byuistats.github.io/DS250-Comeau/course-materials/quarto-for-data-science/><span class="d-none d-md-block">Quarto for Data Science</span><i class="ti-arrow-right ml-2"></i></a></nav></div></div></div></div></section><footer class="section pb-4"><div class=container><div class="row align-items-center"><div class="col-md-8 text-md-left text-center"><p class="mb-md-0 mb-4">J. Hathaway and BYU-I ©</p></div><div class="col-md-4 text-md-right text-center"><ul class=list-inline><li class=list-inline-item><a class="text-color d-inline-block p-2" href=https://github.com/byuidatascience><i class=ti-github></i></a></li><li class=list-inline-item><a class="text-color d-inline-block p-2" href=https://www.linkedin.com/groups/13537407/><i class=ti-linkedin></i></a></li></ul></div></div></div></footer><script src=https://byuistats.github.io/DS250-Comeau/js/script.min.js></script></body></html>