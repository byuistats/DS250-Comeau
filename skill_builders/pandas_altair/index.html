<!doctype html><html lang=en-us><head><meta charset=utf-8><title>pandas and Altair</title><meta name=generator content="Hugo 0.74.3"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=stylesheet href=https://byuistats.github.io/DS250-Comeau/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://byuistats.github.io/DS250-Comeau/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://byuistats.github.io/DS250-Comeau/plugins/highlight/hybrid.css><link rel=icon href=https://byuistats.github.io/DS250-Comeau/images/favicon.png type=image/x-icon><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700&display=swap" rel=stylesheet><style>:root{--primary-color:#02007e;--body-color:#f9f9f9;--text-color:#636363;--text-color-dark:#242738;--white-color:#ffffff;--light-color:#f8f9fa;--font-family:Roboto}</style><link href=https://byuistats.github.io/DS250-Comeau/css/style.min.css rel=stylesheet media=screen><script src=https://byuistats.github.io/DS250-Comeau/plugins/jquery/jquery-1.12.4.js></script><script src=https://byuistats.github.io/DS250-Comeau/plugins/jquery/jquery-ui.js></script><script src=https://byuistats.github.io/DS250-Comeau/plugins/bootstrap/bootstrap.min.js></script><script src=https://byuistats.github.io/DS250-Comeau/plugins/match-height/jquery.matchHeight-min.js></script><script src=https://byuistats.github.io/DS250-Comeau/plugins/highlight/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-132356198-4','auto');ga('send','pageview');}</script></head><body><header class="shadow-bottom sticky-top bg-white"><nav class="navbar navbar-expand-md navbar-light"><div class=container><a class="navbar-brand px-2" href=/DS250-Comeau>DS250</a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation aria-controls=navigation aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class="nav-link text-dark" href=/DS250-Comeau>Home</a></li><li class=nav-item><a class="nav-link text-dark" href=/DS250-Comeau/projects>Projects</a></li><li class=nav-item><a class="nav-link text-dark" href=/DS250-Comeau/contact>Contact</a></li><li class=nav-item><a class="nav-link text-dark" href=/DS250-Comeau/course-materials>Materials</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle text-dark" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Navigate</a><div class=dropdown-menu><a class=dropdown-item href=/DS250-Comeau/slides>Slides</a>
<a class=dropdown-item href=/DS250-Comeau/course-materials/syllabus/>Syllabus</a>
<a class=dropdown-item href=/DS250-Comeau/faq>FAQ</a></div></li></ul></div></div></nav></header><section class="single section-sm pb-0"><div class=container><div class=row><div class=col-lg-3><div class=sidebar><ul class=list-styled><a class=back-btn href=/DS250-Comeau></a><li data-nav-id=https://byuistats.github.io/DS250-Comeau/skill_builders/ title="Skill Builders" class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/skill_builders/>Skill Builders</a><ul><li data-nav-id=https://byuistats.github.io/DS250-Comeau/skill_builders/introduction/ title=Introduction class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/skill_builders/introduction/>Introduction</a></li><li data-nav-id=https://byuistats.github.io/DS250-Comeau/skill_builders/pandas_altair/ title="pandas and Altair" class="sidelist
active"><a href=https://byuistats.github.io/DS250-Comeau/skill_builders/pandas_altair/>pandas and Altair</a></li><li data-nav-id=https://byuistats.github.io/DS250-Comeau/skill_builders/json_missing/ title="JSONs & missing" class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/skill_builders/json_missing/>JSONs & missing</a></li><li data-nav-id=https://byuistats.github.io/DS250-Comeau/skill_builders/relational_data/ title="SQL & databases" class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/skill_builders/relational_data/>SQL & databases</a></li><li data-nav-id=https://byuistats.github.io/DS250-Comeau/skill_builders/ml_sklearn/ title="Machine Learning" class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/skill_builders/ml_sklearn/>Machine Learning</a></li><li data-nav-id=https://byuistats.github.io/DS250-Comeau/skill_builders/munging/ title="Munging data" class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/skill_builders/munging/>Munging data</a></li><li data-nav-id=https://byuistats.github.io/DS250-Comeau/skill_builders/git_github/ title="GitHub and git" class=sidelist><a href=https://byuistats.github.io/DS250-Comeau/skill_builders/git_github/>GitHub and git</a></li></ul></li></ul></div></div><div class=col-lg-9><div class="p-lg-5 p-4 bg-white"><h2 class=mb-5>pandas and Altair</h2><div class=content><p>For this skill builder, we are exploring some important functions in the package of pandas and Altair. DS programming requires a lot of data wrangling. Using the proper functions, we can create concise and comprehensive codes. You should be exposed to a few functions through the readings this week.</p><p>You may want to at least scan the readings before beginning this task since this serves as an assessment of your understanding of the assigned readings. A prepared student should be able to finish the exercises within 60 minutes. You should work through it on your own.</p><h2 id=before-you-start>Before you start</h2><p>Make sure you have installed VS-code, pandas, and Altair on your computer. You can install these packages by typing this line in the terminal:</p><p><em><code>pip install pandas altair</code></em></p><p>OR if you have more than one version of python:</p><p><em><code>pip3.9 install pandas altair</code></em></p><p>pip3.9 indicates the version of python you are installing the packages to.</p><h1 id=data-import>Data import</h1><p><strong>Run the following code to import the data we need for this skill builder:</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>
<span style=color:#75715e># package import</span>
<span style=color:#f92672>import</span> numpy <span style=color:#f92672>as</span> np
<span style=color:#f92672>import</span> pandas <span style=color:#f92672>as</span> pd
<span style=color:#f92672>import</span> altair <span style=color:#f92672>as</span> al 
<span style=color:#75715e># data import</span>
dat <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>read_csv(<span style=color:#e6db74>&#34;https://vincentarelbundock.github.io/Rdatasets/csv/AER/Guns.csv&#34;</span>)

</code></pre></div><p>Make sure the variable <code>dat</code> is correctly assigned in your environment and finish the following exercises. You can read the documentation of the data on this page -
<a href=https://vincentarelbundock.github.io/Rdatasets/doc/AER/Guns.html>https://vincentarelbundock.github.io/Rdatasets/doc/AER/Guns.html</a></p><h3 id=exercise-1>Exercise 1</h3><p>One of the first things we can do to a freshly imported data is to check its columns. This will help us understand the basic structure of the dataframe(table).</p><blockquote><p><strong>Using one line of code, select all the columns in dat, assign it to a variable called col_list.</strong></p></blockquote><details><summary>Hint</summary>
Every dataframe has an attribute "columns".
Accessing this attribute will give you a list of all column names</details><p>We often want to know the dimension of a dataframe. How many columns are in the dataset? How many rows are in the dataset?</p><blockquote><p><strong>Using one line of code, show the number of columns and rows in <code>dat</code>.</strong></p></blockquote><details><summary>Hint</summary>
Every dataframe has an attribute "shape".
Accessing this attribute will give you the dimension of a datafarme</details><p>Now run <code>dat.head()</code>. It will print out the first 5 rows of data in <code>dat</code>.</p><blockquote><p><strong>Just from looking at the output, what column(s) seems to be redundant with the row number?</strong></p></blockquote><details><summary>Hint</summary>
There is one column that serves as nothing but a row counter, that columns is redundant.</details><h3 id=exercise-2>Exercise 2</h3><p>After a brief investigation of the data, we will clean up the data. By <strong>cleaning up</strong>, we are trying to filter down <code>dat</code> so this only holds data we need. We will first get rid of the extra column we found in the previous excercise.</p><blockquote><p><strong>Using one line of code, drop the redundant column using the variable col_list (created in excercise 1)</strong></p></blockquote><details><summary>Hint</summary>
Use `drop()`.<p>Understand what &ldquo;axis&rdquo; is as a parameter of <code>drop()</code>.</p><p>Your function should looks like this:</p><p><code>dat.drop([col_list[_]], axis = _)</code></p><p>fill the &ldquo;_"&rsquo;s with the correct values and assign the output to <code>dat</code>.</p></details><p>Don&rsquo;t forget to save the changes in <code>dat</code>. Run <code>dat.head()</code> to make sure the column is dropped in <code>dat</code>.</p><h3 id=exercise-3>Exercise 3</h3><p>We have filtered <code>dat</code> vertically by dropping a column. Now we will try to filter <code>dat</code> horizontally, meaning we will get rid of some the rows.</p><p>We can do that by applying a condition to <code>dat</code>. A condition is an expression that can be evaluated as <code>True</code>/<code>False</code>. For example, <code>8 > 5</code> is an expression that evaluates to be True. This is trivial because 8 will always be greater than 5.</p><p>Run the code below:</p><blockquote><p><strong>what is the difference between exp1 and exp2?</strong></p></blockquote><pre><code class=language-{python} data-lang={python}>exp1 = 8 &gt; 5
exp2 = dat.violent &lt; 300
</code></pre><details><summary>Hint</summary>
Try type() on else variable OR calling else variable.</details><p>Run ths code below:</p><blockquote><p><strong>By putting <code>dat.violent &lt; 300</code>, and the violent column from <code>dat</code> into a dataframe, what is the relationship between the two columns?</strong></p></blockquote><pre><code class=language-{python} data-lang={python}>exp = pd.DataFrame({&quot;dat.violent &lt; 300&quot; : exp2,
                    &quot;violent value from dat&quot; : dat.violent})

exp
</code></pre><details><summary>Hint</summary>
Try computing `dat.violent[n] < 300` and `(dat.violent < 300)[n]` where n is less than the number of row. The two expressions will always be the same as long as n is less than the number of rows.</details><blockquote><p><strong>Using <code>query()</code>, filter down the <code>dat</code> so that it only contains the data for idaho</strong></p></blockquote><details><summary>Hint</summary>
query() takes in expressions and filters down data.</details><p>Don&rsquo;t forget to save the changes in <code>dat</code>. Run <code>dat.shape()</code> to make sure the there are 23 rows and 13 columns.</p><h3 id=exercise-4>Exercise 4</h3><p>Besides filtering, we can manipulate the data by adding new data to it. By adding a new column to the data, we assign a new value to each row.</p><blockquote><p><strong>Using <code>assign()</code>, create a new column that show the ratio between murder rate and violent rate.</strong></p></blockquote><details><summary>Hint</summary>
Use assign()<p>You see get the ratio by computing this code:</p><p><code>dat.murder/dat.violent</code></p></details><h2 id=exercise-5>Exercise 5</h2><blockquote><p><strong>Create a scatter plot that shows the relationship between murder rate and violent rate for the state of Idaho. Your chart should show murder rate as the x-axis, violent as the y-axis.</strong></p></blockquote><details><summary>Hint</summary>
Can you mimic this plot?<p>(<a href=https://altair-viz.github.io/gallery/scatter_tooltips.html>https://altair-viz.github.io/gallery/scatter_tooltips.html</a>)</p></details><div style=page-break-after:always></div><h2 id=for-an-extra-push>For an extra push</h2><h3 id=exercise-6>Exercise 6</h3><blockquote><p><strong>Using a line of code, filter down the data set so that it only shows the data in years between 1993 and 1997.</strong></p></blockquote><h3 id=exercise-7>Exercise 7</h3><blockquote><p><strong>Create a line chart that show prisoners numbers for the state of Idaho, Utah, and Oregon.</strong></p></blockquote><p>Your chart should show year as the x-axis, prisoner as the y-axis, states as different colours, along with an appropriate title.</p><h2 id=exercise-8>Exercise 8</h2><blockquote><p><strong>Without using <code>query()</code>, finshed the data wrangling in question 2,5 and 6.</strong></p></blockquote><div class="card mb-4 rounded-0 shadow border-0"><div class="card-header rounded-0 bg-white border p-0 border-0"><a class="card-link h4 d-flex tex-dark mb-0 py-3 px-4 justify-content-between" data-toggle=collapse href=#after-you-have-completed-this-skill-builder-with-your-team-or-on-your-own-then-compare-your-work-to-our-script><span>After you have completed this skill builder with your team (or on your own) then compare your work to our script</span> <i class="ti-plus text-primary text-right"></i></a></div><div id=after-you-have-completed-this-skill-builder-with-your-team-or-on-your-own-then-compare-your-work-to-our-script class=collapse data-parent=#accordion><div class="card-body font-secondary text-color"><strong>See the <a href=pandas_altair.py>script</a>.</strong></div></div></div></div><p class="post-meta border-bottom pb-3 mb-0 mt-3">Updated on 15 Sep 2020</p><nav class="pagination mt-3"><a class="nav nav-prev" href=https://byuistats.github.io/DS250-Comeau/skill_builders/introduction/><i class="ti-arrow-left mr-2"></i><span class="d-none d-md-block">Introduction</span></a>
<a class="nav nav-next" href=https://byuistats.github.io/DS250-Comeau/skill_builders/json_missing/><span class="d-none d-md-block">JSONs & missing</span><i class="ti-arrow-right ml-2"></i></a></nav></div></div></div></div></section><footer class="section pb-4"><div class=container><div class="row align-items-center"><div class="col-md-8 text-md-left text-center"><p class="mb-md-0 mb-4">J. Hathaway and BYU-I ©</p></div><div class="col-md-4 text-md-right text-center"><ul class=list-inline><li class=list-inline-item><a class="text-color d-inline-block p-2" href=https://github.com/byuidatascience><i class=ti-github></i></a></li><li class=list-inline-item><a class="text-color d-inline-block p-2" href=https://www.linkedin.com/groups/13537407/><i class=ti-linkedin></i></a></li></ul></div></div></div></footer><script src=https://byuistats.github.io/DS250-Comeau/js/script.min.js></script></body></html>