<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Munging data</title><meta name=generator content="Hugo 0.74.3"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=stylesheet href=https://byuistats.github.io/DS250-Course/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://byuistats.github.io/DS250-Course/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://byuistats.github.io/DS250-Course/plugins/highlight/hybrid.css><link rel=icon href=https://byuistats.github.io/DS250-Course/images/favicon.png type=image/x-icon><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700&display=swap" rel=stylesheet><style>:root{--primary-color:#02007e;--body-color:#f9f9f9;--text-color:#636363;--text-color-dark:#242738;--white-color:#ffffff;--light-color:#f8f9fa;--font-family:Roboto}</style><link href=https://byuistats.github.io/DS250-Course/css/style.min.css rel=stylesheet media=screen><script src=https://byuistats.github.io/DS250-Course/plugins/jquery/jquery-1.12.4.js></script><script src=https://byuistats.github.io/DS250-Course/plugins/jquery/jquery-ui.js></script><script src=https://byuistats.github.io/DS250-Course/plugins/bootstrap/bootstrap.min.js></script><script src=https://byuistats.github.io/DS250-Course/plugins/match-height/jquery.matchHeight-min.js></script><script src=https://byuistats.github.io/DS250-Course/plugins/highlight/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-132356198-4','auto');ga('send','pageview');}</script></head><body><header class="shadow-bottom sticky-top bg-white"><nav class="navbar navbar-expand-md navbar-light"><div class=container><a class="navbar-brand px-2" href=/DS250-Course>DS250</a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation aria-controls=navigation aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class="nav-link text-dark" href=/DS250-Course>Home</a></li><li class=nav-item><a class="nav-link text-dark" href=/DS250-Course/projects>Projects</a></li><li class=nav-item><a class="nav-link text-dark" href=/DS250-Course/contact>Contact</a></li><li class=nav-item><a class="nav-link text-dark" href=/DS250-Course/course-materials>Materials</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle text-dark" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Navigate</a><div class=dropdown-menu><a class=dropdown-item href=/DS250-Course/slides>Slides</a>
<a class=dropdown-item href=/DS250-Course/course-materials/syllabus/>Syllabus</a>
<a class=dropdown-item href=/DS250-Course/faq>FAQ</a></div></li></ul></div></div></nav></header><section class="single section-sm pb-0"><div class=container><div class=row><div class=col-lg-3><div class=sidebar><ul class=list-styled><a class=back-btn href=/DS250-Course></a><li data-nav-id=https://byuistats.github.io/DS250-Course/skill_builders/ title="Skill Builders" class=sidelist><a href=https://byuistats.github.io/DS250-Course/skill_builders/>Skill Builders</a><ul><li data-nav-id=https://byuistats.github.io/DS250-Course/skill_builders/introduction/ title=Introduction class=sidelist><a href=https://byuistats.github.io/DS250-Course/skill_builders/introduction/>Introduction</a></li><li data-nav-id=https://byuistats.github.io/DS250-Course/skill_builders/pandas_altair/ title="pandas and Altair" class=sidelist><a href=https://byuistats.github.io/DS250-Course/skill_builders/pandas_altair/>pandas and Altair</a></li><li data-nav-id=https://byuistats.github.io/DS250-Course/skill_builders/json_missing/ title="JSONs & missing" class=sidelist><a href=https://byuistats.github.io/DS250-Course/skill_builders/json_missing/>JSONs & missing</a></li><li data-nav-id=https://byuistats.github.io/DS250-Course/skill_builders/relational_data/ title="SQL & databases" class=sidelist><a href=https://byuistats.github.io/DS250-Course/skill_builders/relational_data/>SQL & databases</a></li><li data-nav-id=https://byuistats.github.io/DS250-Course/skill_builders/ml_sklearn/ title="Machine Learning" class=sidelist><a href=https://byuistats.github.io/DS250-Course/skill_builders/ml_sklearn/>Machine Learning</a></li><li data-nav-id=https://byuistats.github.io/DS250-Course/skill_builders/munging/ title="Munging data" class="sidelist
active"><a href=https://byuistats.github.io/DS250-Course/skill_builders/munging/>Munging data</a></li><li data-nav-id=https://byuistats.github.io/DS250-Course/skill_builders/git_github/ title="GitHub and git" class=sidelist><a href=https://byuistats.github.io/DS250-Course/skill_builders/git_github/>GitHub and git</a></li></ul></li></ul></div></div><div class=col-lg-9><div class="p-lg-5 p-4 bg-white"><h2 class=mb-5>Munging data</h2><div class=content><h2 id=intro-to-cleaning-movies-data>Intro to cleaning movies data</h2><p><a href=munging.csv>Link to the data</a></p><p>This skill builder focuses on munging (formatting) data into a machine learning ready dataset.
We will be using an IMDB Ratings dataset. It contains columns that are categorical. Sklearn
cannot handle columns that are strings, so we need to convert these into a numerical representation. We accomplish this by either one hot encoding, label encoding, or taking just one value of the range provided. There are many other ways to represent these columns as numbers, but they are beyond the scope of this course.</p><p>Once you&rsquo;ve converted all columns to numeric, in an intelligent way, you will be asked to recreate a graph using altair. Here is the head of the data you will be working with. Enjoy!</p><table><thead><tr><th align=right>star_rating</th><th align=left>content_rating</th><th align=left>genre</th><th align=right>duration</th><th align=left>box_office_rev</th><th align=left>major_hit</th></tr></thead><tbody><tr><td align=right>9.3</td><td align=left>R</td><td align=left>Crime</td><td align=right>142</td><td align=left>€1924521976 - €1925521976</td><td align=left>no</td></tr><tr><td align=right>9.2</td><td align=left>R</td><td align=left>Crime</td><td align=right>175</td><td align=left>€177034987 - €178034987</td><td align=left>no</td></tr><tr><td align=right>9.1</td><td align=left>R</td><td align=left>Crime</td><td align=right>200</td><td align=left>€2617541398 - €2618541398</td><td align=left>no</td></tr><tr><td align=right>9</td><td align=left>PG-13</td><td align=left>Action</td><td align=right>152</td><td align=left>€996115723 - €997115723</td><td align=left>no</td></tr><tr><td align=right>8.9</td><td align=left>R</td><td align=left>Crime</td><td align=right>154</td><td align=left>€1172054364 - €1173054364</td><td align=left>no</td></tr></tbody></table><h3 id=data>Data</h3><p>Link to csv file: <code>...</code></p><hr><h3 id=exercise-0>Exercise 0</h3><ul><li>Grab the high range value for each movie and put it into a new column called <code>high_range_rev</code>.<ul><li><strong>Make sure the data type of this new column is numeric!!</strong></li></ul></li><li>Remove the <code>box_office_rev</code> column from the dataset.</li></ul><p>The <code>.str.split()</code> and <code>.astype()</code> methods might be of use! Also, to get the euro sign just copy it from here, €, and put it in your code.</p><p>The first 5 rows of the resulting dataframe should look like this</p><table><thead><tr><th align=right>star_rating</th><th align=left>content_rating</th><th align=left>genre</th><th align=right>duration</th><th align=left>major_hit</th><th align=right>high_range_rev</th></tr></thead><tbody><tr><td align=right>9.3</td><td align=left>R</td><td align=left>Crime</td><td align=right>142</td><td align=left>no</td><td align=right>2345444803</td></tr><tr><td align=right>9.2</td><td align=left>R</td><td align=left>Crime</td><td align=right>175</td><td align=left>no</td><td align=right>2182412593</td></tr><tr><td align=right>9.1</td><td align=left>R</td><td align=left>Crime</td><td align=right>200</td><td align=left>no</td><td align=right>1604872807</td></tr><tr><td align=right>9</td><td align=left>PG-13</td><td align=left>Action</td><td align=right>152</td><td align=left>no</td><td align=right>284317976</td></tr><tr><td align=right>8.9</td><td align=left>R</td><td align=left>Crime</td><td align=right>154</td><td align=left>yes</td><td align=right>1791932201</td></tr></tbody></table><hr><h3 id=exercise-1>Exercise 1</h3><p>Convert the <code>major_hit</code> column to 1/0&rsquo;s. yes -> 1 and no -> 0. Again, there are several ways to accomplish this. Using our old friend <code>np.where</code> is probably the easiest though.</p><p>The first 5 rows of the resulting dataframe should like this</p><table><thead><tr><th align=right>star_rating</th><th align=left>content_rating</th><th align=left>genre</th><th align=right>duration</th><th align=right>major_hit</th><th align=right>high_range_rev</th></tr></thead><tbody><tr><td align=right>9.3</td><td align=left>R</td><td align=left>Crime</td><td align=right>142</td><td align=right>0</td><td align=right>1925521976</td></tr><tr><td align=right>9.2</td><td align=left>R</td><td align=left>Crime</td><td align=right>175</td><td align=right>0</td><td align=right>178034987</td></tr><tr><td align=right>9.1</td><td align=left>R</td><td align=left>Crime</td><td align=right>200</td><td align=right>0</td><td align=right>2618541398</td></tr><tr><td align=right>9</td><td align=left>PG-13</td><td align=left>Action</td><td align=right>152</td><td align=right>0</td><td align=right>997115723</td></tr><tr><td align=right>8.9</td><td align=left>R</td><td align=left>Crime</td><td align=right>154</td><td align=right>0</td><td align=right>1173054364</td></tr></tbody></table><hr><h3 id=exercise-2>Exercise 2</h3><p>Convert the <code>content_rating</code> column using label encoding. We&rsquo;re using label encoding in this case because the movie ratings already have a natural ordering to them. We will replace each rating with a number in it&rsquo;s natural ascending order.</p><p>To be more specific, here is how we will do it.</p><ul><li>G: 0</li><li>PG: 1</li><li>PG-13: 2</li><li>R: 3</li></ul><p>A dictionary and the <code>.map()</code> method could be useful for this exercise. There are other ways
of tackling this problem though. Be creative!</p><p>The first 5 rows of the resulting dataframe should look like</p><table><thead><tr><th align=right>star_rating</th><th align=right>content_rating</th><th align=left>genre</th><th align=right>duration</th><th align=right>major_hit</th><th align=right>high_range_rev</th></tr></thead><tbody><tr><td align=right>9.3</td><td align=right>3</td><td align=left>Crime</td><td align=right>142</td><td align=right>0</td><td align=right>1925521976</td></tr><tr><td align=right>9.2</td><td align=right>3</td><td align=left>Crime</td><td align=right>175</td><td align=right>0</td><td align=right>178034987</td></tr><tr><td align=right>9.1</td><td align=right>3</td><td align=left>Crime</td><td align=right>200</td><td align=right>0</td><td align=right>2618541398</td></tr><tr><td align=right>9</td><td align=right>2</td><td align=left>Action</td><td align=right>152</td><td align=right>0</td><td align=right>997115723</td></tr><tr><td align=right>8.9</td><td align=right>3</td><td align=left>Crime</td><td align=right>154</td><td align=right>0</td><td align=right>1173054364</td></tr></tbody></table><hr><h3 id=exercise-3>Exercise 3</h3><p>The last column that we need to take care of is <code>genre</code>. We will use one hot encoding for this.
Make sure to ONLY one hot encode the <code>genre</code> column!</p><p>A useful function for one hot encoding is <code>pd.get_dummies()</code>. I recommend checking out the <a href=https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.get_dummies.html>documentation</a>.</p><p>The resulting dataframe should look like the following example; don&rsquo;t worry if your <code>high_range_rev</code> column turned into scientific notation—Pandas does this sometimes.</p><table><thead><tr><th align=right></th><th align=right>star_rating</th><th align=right>content_rating</th><th align=right>duration</th><th align=right>major_hit</th><th align=right>high_range_rev</th><th align=right>genre_Action</th><th align=right>genre_Adventure</th><th align=right>genre_Animation</th><th align=right>genre_Biography</th><th align=right>genre_Comedy</th><th align=right>genre_Crime</th><th align=right>genre_Drama</th><th align=right>genre_Family</th><th align=right>genre_Fantasy</th><th align=right>genre_Horror</th><th align=right>genre_Mystery</th><th align=right>genre_Sci-Fi</th><th align=right>genre_Thriller</th><th align=right>genre_Western</th></tr></thead><tbody><tr><td align=right>0</td><td align=right>9.3</td><td align=right>3</td><td align=right>142</td><td align=right>0</td><td align=right>1.92552e+09</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>1</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td></tr><tr><td align=right>1</td><td align=right>9.2</td><td align=right>3</td><td align=right>175</td><td align=right>0</td><td align=right>1.78035e+08</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>1</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td></tr><tr><td align=right>2</td><td align=right>9.1</td><td align=right>3</td><td align=right>200</td><td align=right>0</td><td align=right>2.61854e+09</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>1</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td></tr><tr><td align=right>3</td><td align=right>9</td><td align=right>2</td><td align=right>152</td><td align=right>0</td><td align=right>9.97116e+08</td><td align=right>1</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td></tr><tr><td align=right>4</td><td align=right>8.9</td><td align=right>3</td><td align=right>154</td><td align=right>0</td><td align=right>1.17305e+09</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>1</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td><td align=right>0</td></tr></tbody></table><hr><h3 id=exercise-4>Exercise 4</h3><p>Recreate this graph as best you can. You&rsquo;ll need to use the original data that specifies the actual rating.</p><p><img src=movie_sb.png alt></p><div class="card mb-4 rounded-0 shadow border-0"><div class="card-header rounded-0 bg-white border p-0 border-0"><a class="card-link h4 d-flex tex-dark mb-0 py-3 px-4 justify-content-between" data-toggle=collapse href=#after-you-have-completed-this-skill-builder-with-your-team-or-on-your-own-then-compare-your-work-to-our-script><span>After you have completed this skill builder with your team (or on your own) then compare your work to our script</span> <i class="ti-plus text-primary text-right"></i></a></div><div id=after-you-have-completed-this-skill-builder-with-your-team-or-on-your-own-then-compare-your-work-to-our-script class=collapse data-parent=#accordion><div class="card-body font-secondary text-color"><strong>See the <a href=munging.py>script</a>.</strong></div></div></div></div><p class="post-meta border-bottom pb-3 mb-0 mt-3">Updated on 15 Sep 2020</p><nav class="pagination mt-3"><a class="nav nav-prev" href=https://byuistats.github.io/DS250-Course/skill_builders/ml_sklearn/><i class="ti-arrow-left mr-2"></i><span class="d-none d-md-block">Machine Learning</span></a>
<a class="nav nav-next" href=https://byuistats.github.io/DS250-Course/skill_builders/git_github/><span class="d-none d-md-block">GitHub and git</span><i class="ti-arrow-right ml-2"></i></a></nav></div></div></div></div></section><footer class="section pb-4"><div class=container><div class="row align-items-center"><div class="col-md-8 text-md-left text-center"><p class="mb-md-0 mb-4">J. Hathaway and BYU-I ©</p></div><div class="col-md-4 text-md-right text-center"><ul class=list-inline><li class=list-inline-item><a class="text-color d-inline-block p-2" href=https://github.com/byuidatascience><i class=ti-github></i></a></li><li class=list-inline-item><a class="text-color d-inline-block p-2" href=https://www.linkedin.com/groups/13537407/><i class=ti-linkedin></i></a></li></ul></div></div></div></footer><script src=https://byuistats.github.io/DS250-Course/js/script.min.js></script></body></html>