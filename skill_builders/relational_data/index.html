<!doctype html><html lang=en-us><head><meta charset=utf-8><title>SQL & databases</title><meta name=generator content="Hugo 0.74.3"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=stylesheet href=https://byuistats.github.io/DS250-Course/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://byuistats.github.io/DS250-Course/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://byuistats.github.io/DS250-Course/plugins/highlight/hybrid.css><link rel=icon href=https://byuistats.github.io/DS250-Course/images/favicon.png type=image/x-icon><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700&display=swap" rel=stylesheet><style>:root{--primary-color:#02007e;--body-color:#f9f9f9;--text-color:#636363;--text-color-dark:#242738;--white-color:#ffffff;--light-color:#f8f9fa;--font-family:Roboto}</style><link href=https://byuistats.github.io/DS250-Course/css/style.min.css rel=stylesheet media=screen><script src=https://byuistats.github.io/DS250-Course/plugins/jquery/jquery-1.12.4.js></script><script src=https://byuistats.github.io/DS250-Course/plugins/jquery/jquery-ui.js></script><script src=https://byuistats.github.io/DS250-Course/plugins/bootstrap/bootstrap.min.js></script><script src=https://byuistats.github.io/DS250-Course/plugins/match-height/jquery.matchHeight-min.js></script><script src=https://byuistats.github.io/DS250-Course/plugins/highlight/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-132356198-4','auto');ga('send','pageview');}</script></head><body><header class="shadow-bottom sticky-top bg-white"><nav class="navbar navbar-expand-md navbar-light"><div class=container><a class="navbar-brand px-2" href=/DS250-Course>DS250</a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation aria-controls=navigation aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class="nav-link text-dark" href=/DS250-Course>Home</a></li><li class=nav-item><a class="nav-link text-dark" href=/DS250-Course/projects>Projects</a></li><li class=nav-item><a class="nav-link text-dark" href=/DS250-Course/contact>Contact</a></li><li class=nav-item><a class="nav-link text-dark" href=/DS250-Course/course-materials>Materials</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle text-dark" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Navigate</a><div class=dropdown-menu><a class=dropdown-item href=/DS250-Course/slides>Slides</a>
<a class=dropdown-item href=/DS250-Course/course-materials/syllabus/>Syllabus</a>
<a class=dropdown-item href=/DS250-Course/faq>FAQ</a></div></li></ul></div></div></nav></header><section class="single section-sm pb-0"><div class=container><div class=row><div class=col-lg-3><div class=sidebar><ul class=list-styled><a class=back-btn href=/DS250-Course></a><li data-nav-id=https://byuistats.github.io/DS250-Course/skill_builders/ title="Skill Builders" class=sidelist><a href=https://byuistats.github.io/DS250-Course/skill_builders/>Skill Builders</a><ul><li data-nav-id=https://byuistats.github.io/DS250-Course/skill_builders/introduction/ title=Introduction class=sidelist><a href=https://byuistats.github.io/DS250-Course/skill_builders/introduction/>Introduction</a></li><li data-nav-id=https://byuistats.github.io/DS250-Course/skill_builders/pandas_altair/ title="pandas and Altair" class=sidelist><a href=https://byuistats.github.io/DS250-Course/skill_builders/pandas_altair/>pandas and Altair</a></li><li data-nav-id=https://byuistats.github.io/DS250-Course/skill_builders/json_missing/ title="JSONs & missing" class=sidelist><a href=https://byuistats.github.io/DS250-Course/skill_builders/json_missing/>JSONs & missing</a></li><li data-nav-id=https://byuistats.github.io/DS250-Course/skill_builders/relational_data/ title="SQL & databases" class="sidelist
active"><a href=https://byuistats.github.io/DS250-Course/skill_builders/relational_data/>SQL & databases</a></li><li data-nav-id=https://byuistats.github.io/DS250-Course/skill_builders/ml_sklearn/ title="Machine Learning" class=sidelist><a href=https://byuistats.github.io/DS250-Course/skill_builders/ml_sklearn/>Machine Learning</a></li><li data-nav-id=https://byuistats.github.io/DS250-Course/skill_builders/munging/ title="Munging data" class=sidelist><a href=https://byuistats.github.io/DS250-Course/skill_builders/munging/>Munging data</a></li><li data-nav-id=https://byuistats.github.io/DS250-Course/skill_builders/git_github/ title="GitHub and git" class=sidelist><a href=https://byuistats.github.io/DS250-Course/skill_builders/git_github/>GitHub and git</a></li></ul></li></ul></div></div><div class=col-lg-9><div class="p-lg-5 p-4 bg-white"><h2 class=mb-5>SQL & databases</h2><div class=content><h1 id=skill-builder-relational-database>Skill builder (relational database)</h1><p>For this skill builder, we are exploring some important topics in relational databases. This exercise will require you to create SQL queries through python. You may want to at least scan the readings before beginning this task since this serves as an assessment of your understanding of the assigned readings.</p><p>A competent student should be able to finish the exercises within 75 minutes.</p><h2 id=before-you-start>Before you start</h2><p>Make sure you have installed VS-code, pandas, and Altair on your computer.</p><p>Also make sure you have gone through the tutorial on under course materials called <a href=../../course-materials/sql-for-data-science/>SQL for Data Science</a>:
we assume that you have a connection to your data.</p><h2 id=exercise-1>Exercise 1</h2><h3 id=readme-file>Readme file</h3><p>A database can consist of more than one table/data set. A relational database consists of tables/data sets that share columns. These shared columns then establish the relationship between the tables, thus the name relational database. The relations are sometimes not easily found and they require careful investigations.</p><p>To understand what is in a relational database, we can start with understanding the tables and the columns within.</p><p>Here is a link to the <a href="https://data.world/byuidss/cse-250-baseball-database/workspace/file?filename=readme2014.txt">readme file of the baseball database</a>.</p><blockquote><p>What is the name of the table that records data about pitchers in the regular seasons?</p></blockquote><blockquote><p>What do the HR and HBP columns mean in that table respectively?</p></blockquote><h2 id=excercise-2-select-and-from>Excercise 2 SELECT and FROM</h2><p>The simplest SQL query is a query with <code>SELECT</code> and <code>FROM</code>. These are the keywords you will see again and again in SQL. Usually, when constructing a more complex query, it is easier to identify what goes into these two clauses first.</p><blockquote><p>Create a query that shows all columns from the table you found in Exercise 1, save the dataframe in a variable &ldquo;pitch&rdquo;</p></blockquote><p>You script should look something like:</p><pre><code class=language-{python} data-lang={python}>result = pd.read_sql_query(
    'SELECT _______ FROM _______',
    con)

results
</code></pre><h2 id=excercise-2-where>Excercise 2 WHERE</h2><p>The <code>WHERE</code> keyword allows us to filter down the table horizontally (fewer rows).</p><p>It goes after <code>SELECT</code> and <code>FROM</code>.</p><blockquote><p>Using a SQL query, select all rows in the same table where HR is lesser than 10 and gs is greater than 25.</p></blockquote><blockquote><p>Find out what the columns mean and explain your query in words</p></blockquote><h2 id=excercise-3-order-by>Excercise 3 ORDER BY</h2><p><code>ORDER BY</code> sort the table you select by one or more columns and goes after <code>WHERE</code></p><blockquote><p>Using the same query in exercise 2, edit it so that the table is ordered by the year of the season(nearest to furthermost) and the player ID(alphabetically).</p></blockquote><h2 id=excercise-4-joins>Excercise 4 Joins</h2><p>Joins are used when you wish to create a new table through two different tables. Keep in mind that you have to identify the relationship between two tables before you can correctly join them.</p><p><code>JOIN</code> goes between <code>FROM</code> and <code>WHERE</code>.</p><blockquote><p>Identify the shared columns (keys) and join the table in exercise 2 with the salaries table, then filter the data so that it shows only pitchers in the year 1986.</p></blockquote><p>You should get a dataframe with 306 rows.</p><h2 id=exercise-5-group-by>Exercise 5 Group by</h2><p><code>Group by</code> is a keyword we use to lower the level of granularity of a table. Meaning we are combining rows into one by the given column(s).</p><p><code>Create a query that captures the number of pitchers the Washington Nationals used in each year, then sort the table by year</code></p><p>You should get a dataframe with 23 rows.</p><h1 id=for-the-overachievers>For the overachievers</h1><h2 id=excercise-6>Excercise 6</h2><p>Research the order of operations for SQL and put the following keywords in that order.</p><ul><li><code>SELECT</code></li><li><code>FROM</code></li><li><code>JOIN</code></li><li><code>WHERE</code></li><li><code>HAVING</code></li><li><code>ORDER BY</code></li><li><code>GROUP BY</code></li><li><code>LIMIT</code></li></ul><div class="card mb-4 rounded-0 shadow border-0"><div class="card-header rounded-0 bg-white border p-0 border-0"><a class="card-link h4 d-flex tex-dark mb-0 py-3 px-4 justify-content-between" data-toggle=collapse href=#after-you-have-completed-this-skill-builder-with-your-team-or-on-your-own-then-compare-your-work-to-our-script><span>After you have completed this skill builder with your team (or on your own) then compare your work to our script</span> <i class="ti-plus text-primary text-right"></i></a></div><div id=after-you-have-completed-this-skill-builder-with-your-team-or-on-your-own-then-compare-your-work-to-our-script class=collapse data-parent=#accordion><div class="card-body font-secondary text-color"><strong>See the <a href=relational_data.py>script</a>.</strong></div></div></div></div><p class="post-meta border-bottom pb-3 mb-0 mt-3">Updated on 15 Sep 2020</p><nav class="pagination mt-3"><a class="nav nav-prev" href=https://byuistats.github.io/DS250-Course/skill_builders/json_missing/><i class="ti-arrow-left mr-2"></i><span class="d-none d-md-block">JSONs & missing</span></a>
<a class="nav nav-next" href=https://byuistats.github.io/DS250-Course/skill_builders/ml_sklearn/><span class="d-none d-md-block">Machine Learning</span><i class="ti-arrow-right ml-2"></i></a></nav></div></div></div></div></section><footer class="section pb-4"><div class=container><div class="row align-items-center"><div class="col-md-8 text-md-left text-center"><p class="mb-md-0 mb-4">J. Hathaway and BYU-I Â©</p></div><div class="col-md-4 text-md-right text-center"><ul class=list-inline><li class=list-inline-item><a class="text-color d-inline-block p-2" href=https://github.com/byuidatascience><i class=ti-github></i></a></li><li class=list-inline-item><a class="text-color d-inline-block p-2" href=https://www.linkedin.com/groups/13537407/><i class=ti-linkedin></i></a></li></ul></div></div></div></footer><script src=https://byuistats.github.io/DS250-Course/js/script.min.js></script></body></html>